@if ((watchlistService.watchlist$ | async)?.length || 0 > 0) {
  <div class="container py-5">
    <h4 class="mb-4 fw-bold">Watch list</h4>
    <div class="row row-cols-1 row-cols-md-2 g-4">
      @for (movie of watchlistService.fetchWatchlistMovie(); track movie.id) {
        <div class="col clickable" [routerLink]="['/movie', movie.id]">
          <div class="card rec-card p-3 d-flex flex-row align-items-start gap-3 shadow-sm h-100">

            <!-- Poster -->
            <img [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path" alt="{{movie.title}}"/>
            
            <!-- Card Body -->
            <div class="flex-grow-1 d-flex flex-column">
              <div class="d-flex justify-content-between align-items-start">
                <div> 
                  <h5 class="fw-bold mb-1">{{ movie.title }}</h5>
                  <small class="text-muted">{{ movie.release_date | date }}</small>
                </div>

                <!-- Heart button -->
                <button class="btn btn-link p-0" (click)="watchlistService.removeMovie(movie.id); $event.stopPropagation(); $event.preventDefault()">
                  <i class="bi bi-heart-fill text-warning fs-5"></i>
                </button>
              </div>

              <!-- Rating -->
              <div class="mb-2">
                <span class="text-warning">
                  @for (star of getStars(movie.vote_average); track $index) {
                    <i class="bi" [ngClass]=" star ? 'bi-star-fill text-dark' : 'bi-star text-secondary'"></i>
                  }
                </span>
                <span class="ms-2">{{ movie.vote_count }}</span>
              </div>

              <!-- Overview -->
              <p class="text-muted small mb-0 text-clamp-3">{{ movie.overview }}</p>

            </div>
          </div>
        </div>
      }
    </div>
  </div>
} @else {
  <!-- No movies -->
  <div class="text-center my-5">
    <i class="bi bi-heartbreak display-1 text-secondary"></i>
    <h5 class="mt-3 text-muted">No Movies in watch list</h5>
    <a routerLink="/" class="btn btn-warning mt-3">Back to home</a>
  </div>
}




